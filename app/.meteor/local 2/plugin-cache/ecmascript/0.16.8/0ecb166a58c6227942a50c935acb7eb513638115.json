{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:meteorx/src/livedata.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"packages/montiapm:meteorx/src/livedata.js","filename":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:meteorx/src/livedata.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/phatca/Documents/GitHub/professor-trading-card/app","root":"/Users/phatca/Documents/GitHub/professor-trading-card/app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:meteorx/src/livedata.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/montiapm:meteorx/src/livedata.js"}},"code":"exposeLivedata = function (namespace) {\n  // instrumenting session\n  const fakeSocket = {\n    send: function () {},\n    close: function () {},\n    headers: []\n  };\n  const ddpConnectMessage = {\n    msg: 'connect',\n    version: 'pre1',\n    support: ['pre1']\n  };\n  Meteor.server._handleConnect(fakeSocket, ddpConnectMessage);\n  if (fakeSocket._meteorSession) {\n    // for newer meteor versions\n    namespace.Session = fakeSocket._meteorSession.constructor;\n    exposeSubscription(fakeSocket._meteorSession, namespace);\n    exposeSessionCollectionView(fakeSocket._meteorSession, namespace);\n    if (Meteor.server._removeSession) {\n      // 1.7 +\n      Meteor.server._removeSession(fakeSocket._meteorSession);\n    } else if (Meteor.server._closeSession) {\n      // 0.7.x +\n      Meteor.server._closeSession(fakeSocket._meteorSession);\n    } else if (Meteor.server._destroySession) {\n      // 0.6.6.x\n      Meteor.server._destroySession(fakeSocket._meteorSession);\n    }\n  } else if (fakeSocket.meteor_session) {\n    // support for 0.6.5.x\n    namespace.Session = fakeSocket.meteor_session.constructor;\n\n    // instrumenting subscription\n    exposeSubscription(fakeSocket.meteor_session, namespace);\n    exposeSessionCollectionView(fakeSocket._meteorSession, namespace);\n    fakeSocket.meteor_session.detach(fakeSocket);\n  } else {\n    console.error('expose: session exposing failed');\n  }\n};\nfunction exposeSubscription(session, namespace) {\n  const subId = Random.id();\n  const publicationHandler = function () {\n    this.ready();\n  };\n  const pubName = '__dummy_pub_' + Random.id();\n  session._startSubscription(publicationHandler, subId, [], pubName);\n  const isMap = session._namedSubs instanceof Map;\n  const subscription = isMap ? session._namedSubs.get(subId) : session._namedSubs[subId];\n  namespace.Subscription = subscription.constructor;\n\n  // cleaning up\n  session._stopSubscription(subId);\n}\nfunction exposeSessionCollectionView(session, namespace) {\n  const documentView = session.getCollectionView();\n  namespace.SessionCollectionView = documentView.constructor;\n  const id = 'the-id';\n  documentView.added('sample-handle', id, {\n    aa: 10\n  });\n  const isMap = documentView.documents instanceof Map;\n  const doc = isMap ? documentView.documents.get(id) : documentView.documents[id];\n  namespace.SessionDocumentView = doc.constructor;\n}","map":{"version":3,"names":["exposeLivedata","namespace","fakeSocket","send","close","headers","ddpConnectMessage","msg","version","support","Meteor","server","_handleConnect","_meteorSession","Session","constructor","exposeSubscription","exposeSessionCollectionView","_removeSession","_closeSession","_destroySession","meteor_session","detach","console","error","session","subId","Random","id","publicationHandler","ready","pubName","_startSubscription","isMap","_namedSubs","Map","subscription","get","Subscription","_stopSubscription","documentView","getCollectionView","SessionCollectionView","added","aa","documents","doc","SessionDocumentView"],"sources":["packages/montiapm:meteorx/src/livedata.js"],"sourcesContent":["exposeLivedata = function(namespace) {\n  // instrumenting session\n  const fakeSocket = {send: function() {}, close: function() {}, headers: []};\n  const ddpConnectMessage = {msg: 'connect', version: 'pre1', support: ['pre1']};\n  Meteor.server._handleConnect(fakeSocket, ddpConnectMessage);\n\n  if(fakeSocket._meteorSession) { // for newer meteor versions\n    namespace.Session = fakeSocket._meteorSession.constructor;\n\n    exposeSubscription(fakeSocket._meteorSession, namespace);\n    exposeSessionCollectionView(fakeSocket._meteorSession, namespace);\n\n    if (Meteor.server._removeSession) {\n      // 1.7 +\n      Meteor.server._removeSession(fakeSocket._meteorSession);\n    } else if (Meteor.server._closeSession) {\n      // 0.7.x +\n      Meteor.server._closeSession(fakeSocket._meteorSession);\n    } else if(Meteor.server._destroySession) {\n      // 0.6.6.x\n      Meteor.server._destroySession(fakeSocket._meteorSession);\n    }\n  } else if(fakeSocket.meteor_session) { // support for 0.6.5.x\n    namespace.Session = fakeSocket.meteor_session.constructor;\n\n    // instrumenting subscription\n    exposeSubscription(fakeSocket.meteor_session, namespace);\n    exposeSessionCollectionView(fakeSocket._meteorSession, namespace);\n\n    fakeSocket.meteor_session.detach(fakeSocket);\n  } else {\n    console.error('expose: session exposing failed');\n  }\n};\n\nfunction exposeSubscription(session, namespace) {\n  const subId = Random.id();\n  const publicationHandler = function() {\n    this.ready()\n  };\n  const pubName = '__dummy_pub_' + Random.id();\n\n  session._startSubscription(publicationHandler, subId, [], pubName);\n  const isMap = session._namedSubs instanceof Map;\n  const subscription = isMap ? session._namedSubs.get(subId) : session._namedSubs[subId];\n  namespace.Subscription = subscription.constructor;\n\n  // cleaning up\n  session._stopSubscription(subId);\n}\n\nfunction exposeSessionCollectionView(session, namespace) {\n  const documentView = session.getCollectionView();\n  namespace.SessionCollectionView = documentView.constructor;\n\n  const id = 'the-id';\n  documentView.added('sample-handle', id, {aa: 10});\n  const isMap = documentView.documents instanceof Map;\n  const doc = isMap ? documentView.documents.get(id) : documentView.documents[id];\n  namespace.SessionDocumentView = doc.constructor;\n}\n"],"mappings":"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"},"sourceType":"module","externalDependencies":{},"hash":"0ecb166a58c6227942a50c935acb7eb513638115"}
