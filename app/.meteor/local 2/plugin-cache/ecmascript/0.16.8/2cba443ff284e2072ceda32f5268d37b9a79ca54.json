{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:agent/lib/hijack/error.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"packages/montiapm:agent/lib/hijack/error.js","filename":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:agent/lib/hijack/error.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/phatca/Documents/GitHub/professor-trading-card/app","root":"/Users/phatca/Documents/GitHub/professor-trading-card/app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:agent/lib/hijack/error.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/montiapm:agent/lib/hijack/error.js"}},"code":"module.export({\n  MeteorDebugIgnore: () => MeteorDebugIgnore,\n  TrackUncaughtExceptions: () => TrackUncaughtExceptions,\n  TrackUnhandledRejections: () => TrackUnhandledRejections,\n  TrackMeteorDebug: () => TrackMeteorDebug\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n}, 0);\nlet CreateUserStack;\nmodule.link(\"../utils\", {\n  CreateUserStack(v) {\n    CreateUserStack = v;\n  }\n}, 1);\nconst MeteorDebugIgnore = Symbol('MontiMeteorDebugIgnore');\nfunction TrackUncaughtExceptions() {\n  process.on('uncaughtException', function (err) {\n    if (err === undefined || err === null) {\n      let type = err === null ? 'null' : 'undefined';\n      err = new Error(\"uncaught exception: \".concat(type));\n    }\n    const timer = setTimeout(function () {\n      throwError(err);\n    }, 1000 * 10);\n\n    // skip errors with `_skipKadira` flag\n    if (err._skipKadira) {\n      return;\n    }\n\n    // let the server crash normally if error tracking is disabled\n    if (!Kadira.options.enableErrorTracking) {\n      printErrorAndKill(err);\n    }\n\n    // looking for already tracked errors and throw them immediately\n    // throw error immediately if kadira is not ready\n    if (err._tracked || !Kadira.connected) {\n      printErrorAndKill(err);\n    }\n    let trace = getTrace(err, 'server-crash', 'uncaughtException');\n    Kadira.models.error.trackError(err, trace);\n    Kadira._sendPayload(function () {\n      clearTimeout(timer);\n      throwError(err);\n    });\n    function throwError(_err) {\n      // sometimes error came back from a fiber.\n      // But we don't fibers to track that error for us\n      // That's why we throw the error on the nextTick\n      process.nextTick(function () {\n        // we need to mark this error where we really need to throw\n        _err._tracked = true;\n        printErrorAndKill(_err);\n      });\n    }\n  });\n  function printErrorAndKill(err) {\n    // since we are capturing error, we are also on the error message.\n    // so developers think we are also reponsible for the error.\n    // But we are not. This will fix that.\n    console.error(err.stack);\n    process.exit(7);\n  }\n}\nfunction TrackUnhandledRejections() {\n  process.on('unhandledRejection', function (reason) {\n    // skip errors with `_skipKadira` flag\n    if (reason && reason._skipKadira || !Kadira.options.enableErrorTracking) {\n      return;\n    }\n    if (reason === undefined) {\n      reason = new Error('unhandledRejection: undefined');\n    }\n    let trace = getTrace(reason, 'server-internal', 'unhandledRejection');\n    Kadira.models.error.trackError(reason, trace);\n\n    // TODO: we should respect the --unhandled-rejections option\n    // message taken from\n    // https://github.com/nodejs/node/blob/f4797ff1ef7304659d747d181ec1e7afac408d50/lib/internal/process/promises.js#L243-L248\n    const message = 'This error originated either by ' + 'throwing inside of an async function without a catch block, ' + 'or by rejecting a promise which was not handled with .catch().' + ' The promise rejected with the reason: ';\n\n    // We could emit a warning instead like Node does internally\n    // but it requires Node 8 or newer\n    console.warn(message);\n    console.error(reason && reason.stack ? reason.stack : reason);\n  });\n}\nfunction TrackMeteorDebug() {\n  let originalMeteorDebug = Meteor._debug;\n  Meteor._debug = function (message, stack) {\n    // Sometimes Meteor calls Meteor._debug with no arguments\n    // to log an empty line\n    const isArgs = message !== undefined || stack !== undefined;\n\n    // We've changed `stack` into an object at method and sub handlers so we can\n    // detect the error here. These errors are already tracked so don't track them again.\n    let alreadyTracked = false;\n\n    // Some Meteor versions pass the error, and other versions pass the error stack\n    // Restore so origionalMeteorDebug shows the stack as a string instead as an object\n    if (stack && stack[MeteorDebugIgnore]) {\n      alreadyTracked = true;\n      arguments[1] = stack.stack;\n    } else if (stack && stack.stack && stack.stack[MeteorDebugIgnore]) {\n      alreadyTracked = true;\n      arguments[1] = stack.stack.stack;\n    }\n\n    // only send to the server if connected to kadira\n    if (Kadira.options.enableErrorTracking && isArgs && !alreadyTracked && Kadira.connected) {\n      let errorMessage = message;\n      if (typeof message === 'string' && stack instanceof Error) {\n        const separator = message.endsWith(':') ? '' : ':';\n        errorMessage = \"\".concat(message).concat(separator, \" \").concat(stack.message);\n      }\n      let error = new Error(errorMessage);\n      if (stack instanceof Error) {\n        error.stack = stack.stack;\n      } else if (stack) {\n        error.stack = stack;\n      } else {\n        error.stack = CreateUserStack(error);\n      }\n      let trace = getTrace(error, 'server-internal', 'Meteor._debug');\n      Kadira.models.error.trackError(error, trace);\n    }\n    return originalMeteorDebug.apply(this, arguments);\n  };\n}\nfunction getTrace(err, type, subType) {\n  return {\n    type,\n    subType,\n    name: err.message,\n    errored: true,\n    at: Kadira.syncedDate.getTime(),\n    events: [['start', 0, {}], ['error', 0, {\n      error: {\n        message: err.message,\n        stack: err.stack\n      }\n    }]],\n    metrics: {\n      total: 0\n    }\n  };\n}","map":{"version":3,"names":["module","export","MeteorDebugIgnore","TrackUncaughtExceptions","TrackUnhandledRejections","TrackMeteorDebug","Meteor","link","v","CreateUserStack","Symbol","process","on","err","undefined","type","Error","concat","timer","setTimeout","throwError","_skipKadira","Kadira","options","enableErrorTracking","printErrorAndKill","_tracked","connected","trace","getTrace","models","error","trackError","_sendPayload","clearTimeout","_err","nextTick","console","stack","exit","reason","message","warn","originalMeteorDebug","_debug","isArgs","alreadyTracked","arguments","errorMessage","separator","endsWith","apply","subType","name","errored","at","syncedDate","getTime","events","metrics","total"],"sources":["packages/montiapm:agent/lib/hijack/error.js"],"sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { CreateUserStack } from '../utils';\n\nexport const MeteorDebugIgnore = Symbol('MontiMeteorDebugIgnore');\n\nexport function TrackUncaughtExceptions () {\n  process.on('uncaughtException', function (err) {\n    if (err === undefined || err === null) {\n      let type = err === null ? 'null' : 'undefined';\n      err = new Error(`uncaught exception: ${type}`);\n    }\n\n    const timer = setTimeout(function () {\n      throwError(err);\n    }, 1000 * 10);\n\n    // skip errors with `_skipKadira` flag\n    if (err._skipKadira) {\n      return;\n    }\n\n    // let the server crash normally if error tracking is disabled\n    if (!Kadira.options.enableErrorTracking) {\n      printErrorAndKill(err);\n    }\n\n    // looking for already tracked errors and throw them immediately\n    // throw error immediately if kadira is not ready\n    if (err._tracked || !Kadira.connected) {\n      printErrorAndKill(err);\n    }\n\n    let trace = getTrace(err, 'server-crash', 'uncaughtException');\n    Kadira.models.error.trackError(err, trace);\n    Kadira._sendPayload(function () {\n      clearTimeout(timer);\n      throwError(err);\n    });\n\n\n    function throwError (_err) {\n      // sometimes error came back from a fiber.\n      // But we don't fibers to track that error for us\n      // That's why we throw the error on the nextTick\n      process.nextTick(function () {\n        // we need to mark this error where we really need to throw\n        _err._tracked = true;\n        printErrorAndKill(_err);\n      });\n    }\n  });\n\n  function printErrorAndKill (err) {\n    // since we are capturing error, we are also on the error message.\n    // so developers think we are also reponsible for the error.\n    // But we are not. This will fix that.\n    console.error(err.stack);\n    process.exit(7);\n  }\n}\n\nexport function TrackUnhandledRejections () {\n  process.on('unhandledRejection', function (reason) {\n    // skip errors with `_skipKadira` flag\n    if (\n      reason &&\n      reason._skipKadira ||\n      !Kadira.options.enableErrorTracking\n    ) {\n      return;\n    }\n\n    if (reason === undefined) {\n      reason = new Error('unhandledRejection: undefined');\n    }\n\n    let trace = getTrace(reason, 'server-internal', 'unhandledRejection');\n    Kadira.models.error.trackError(reason, trace);\n\n    // TODO: we should respect the --unhandled-rejections option\n    // message taken from\n    // https://github.com/nodejs/node/blob/f4797ff1ef7304659d747d181ec1e7afac408d50/lib/internal/process/promises.js#L243-L248\n    const message =\n      'This error originated either by ' +\n      'throwing inside of an async function without a catch block, ' +\n      'or by rejecting a promise which was not handled with .catch().' +\n      ' The promise rejected with the reason: ';\n\n    // We could emit a warning instead like Node does internally\n    // but it requires Node 8 or newer\n    console.warn(message);\n    console.error(reason && reason.stack ? reason.stack : reason);\n  });\n}\n\nexport function TrackMeteorDebug () {\n  let originalMeteorDebug = Meteor._debug;\n  Meteor._debug = function (message, stack) {\n    // Sometimes Meteor calls Meteor._debug with no arguments\n    // to log an empty line\n    const isArgs = message !== undefined || stack !== undefined;\n\n    // We've changed `stack` into an object at method and sub handlers so we can\n    // detect the error here. These errors are already tracked so don't track them again.\n    let alreadyTracked = false;\n\n    // Some Meteor versions pass the error, and other versions pass the error stack\n    // Restore so origionalMeteorDebug shows the stack as a string instead as an object\n    if (stack && stack[MeteorDebugIgnore]) {\n      alreadyTracked = true;\n      arguments[1] = stack.stack;\n    } else if (stack && stack.stack && stack.stack[MeteorDebugIgnore]) {\n      alreadyTracked = true;\n      arguments[1] = stack.stack.stack;\n    }\n\n    // only send to the server if connected to kadira\n    if (\n      Kadira.options.enableErrorTracking &&\n      isArgs &&\n      !alreadyTracked &&\n      Kadira.connected\n    ) {\n      let errorMessage = message;\n\n      if (typeof message === 'string' && stack instanceof Error) {\n        const separator = message.endsWith(':') ? '' : ':';\n        errorMessage = `${message}${separator} ${stack.message}`;\n      }\n\n      let error = new Error(errorMessage);\n      if (stack instanceof Error) {\n        error.stack = stack.stack;\n      } else if (stack) {\n        error.stack = stack;\n      } else {\n        error.stack = CreateUserStack(error);\n      }\n      let trace = getTrace(error, 'server-internal', 'Meteor._debug');\n      Kadira.models.error.trackError(error, trace);\n    }\n\n    return originalMeteorDebug.apply(this, arguments);\n  };\n}\n\nfunction getTrace (err, type, subType) {\n  return {\n    type,\n    subType,\n    name: err.message,\n    errored: true,\n    at: Kadira.syncedDate.getTime(),\n    events: [\n      ['start', 0, {}],\n      ['error', 0, {error: {message: err.message, stack: err.stack}}]\n    ],\n    metrics: {\n      total: 0\n    }\n  };\n}\n"],"mappings":"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"},"sourceType":"module","externalDependencies":{},"hash":"2cba443ff284e2072ceda32f5268d37b9a79ca54"}
