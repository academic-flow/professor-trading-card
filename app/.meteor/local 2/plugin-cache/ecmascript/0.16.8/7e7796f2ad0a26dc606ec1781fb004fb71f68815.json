{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:agent/lib/hijack/instrument.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.x86_64"},"sourceFileName":"packages/montiapm:agent/lib/hijack/instrument.js","filename":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:agent/lib/hijack/instrument.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/phatca/Documents/GitHub/professor-trading-card/app","root":"/Users/phatca/Documents/GitHub/professor-trading-card/app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/Users/phatca/Documents/GitHub/professor-trading-card/app/packages/montiapm:agent/lib/hijack/instrument.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/montiapm:agent/lib/hijack/instrument.js"}},"code":"let wrapWebApp;\nmodule.link(\"./wrap_webapp.js\", {\n  wrapWebApp(v) {\n    wrapWebApp = v;\n  }\n}, 0);\nlet wrapFastRender;\nmodule.link(\"./fast_render.js\", {\n  wrapFastRender(v) {\n    wrapFastRender = v;\n  }\n}, 1);\nlet wrapFs;\nmodule.link(\"./fs.js\", {\n  wrapFs(v) {\n    wrapFs = v;\n  }\n}, 2);\nlet wrapPicker;\nmodule.link(\"./picker.js\", {\n  wrapPicker(v) {\n    wrapPicker = v;\n  }\n}, 3);\nlet wrapRouters;\nmodule.link(\"./wrap_routers.js\", {\n  wrapRouters(v) {\n    wrapRouters = v;\n  }\n}, 4);\nlet wrapFibers;\nmodule.link(\"./async.js\", {\n  wrapFibers(v) {\n    wrapFibers = v;\n  }\n}, 5);\nlet wrapSubscription;\nmodule.link(\"./wrap_subscription\", {\n  wrapSubscription(v) {\n    wrapSubscription = v;\n  }\n}, 6);\nlet wrapServer;\nmodule.link(\"./wrap_server\", {\n  wrapServer(v) {\n    wrapServer = v;\n  }\n}, 7);\nlet wrapSession;\nmodule.link(\"./wrap_session\", {\n  wrapSession(v) {\n    wrapSession = v;\n  }\n}, 8);\nlet wrapForCountingObservers, wrapMultiplexer, wrapOplogObserveDriver, wrapPollingObserveDriver;\nmodule.link(\"./wrap_observers\", {\n  wrapForCountingObservers(v) {\n    wrapForCountingObservers = v;\n  },\n  wrapMultiplexer(v) {\n    wrapMultiplexer = v;\n  },\n  wrapOplogObserveDriver(v) {\n    wrapOplogObserveDriver = v;\n  },\n  wrapPollingObserveDriver(v) {\n    wrapPollingObserveDriver = v;\n  }\n}, 9);\nlet wrapStringifyDDP;\nmodule.link(\"./wrap_ddp_stringify\", {\n  wrapStringifyDDP(v) {\n    wrapStringifyDDP = v;\n  }\n}, 10);\nlet setLabels;\nmodule.link(\"./set_labels\", {\n  setLabels(v) {\n    setLabels = v;\n  }\n}, 11);\nlet hijackDBOps;\nmodule.link(\"./db\", {\n  hijackDBOps(v) {\n    hijackDBOps = v;\n  }\n}, 12);\nlet instrumented = false;\nKadira._startInstrumenting = function (callback) {\n  if (instrumented) {\n    callback();\n    return;\n  }\n  instrumented = true;\n  wrapFibers();\n  wrapStringifyDDP();\n  wrapWebApp();\n  wrapFastRender();\n  wrapPicker();\n  wrapFs();\n  wrapRouters();\n  MeteorX.onReady(function () {\n    // instrumenting session\n    wrapServer(MeteorX.Server.prototype);\n    wrapSession(MeteorX.Session.prototype);\n    wrapSubscription(MeteorX.Subscription.prototype);\n    if (MeteorX.MongoOplogDriver) {\n      wrapOplogObserveDriver(MeteorX.MongoOplogDriver.prototype);\n    }\n    if (MeteorX.MongoPollingDriver) {\n      wrapPollingObserveDriver(MeteorX.MongoPollingDriver.prototype);\n    }\n    if (MeteorX.Multiplexer) {\n      wrapMultiplexer(MeteorX.Multiplexer.prototype);\n    }\n    wrapForCountingObservers();\n    hijackDBOps();\n    setLabels();\n    callback();\n  });\n};","map":{"version":3,"names":["wrapWebApp","module","link","v","wrapFastRender","wrapFs","wrapPicker","wrapRouters","wrapFibers","wrapSubscription","wrapServer","wrapSession","wrapForCountingObservers","wrapMultiplexer","wrapOplogObserveDriver","wrapPollingObserveDriver","wrapStringifyDDP","setLabels","hijackDBOps","instrumented","Kadira","_startInstrumenting","callback","MeteorX","onReady","Server","prototype","Session","Subscription","MongoOplogDriver","MongoPollingDriver","Multiplexer"],"sources":["packages/montiapm:agent/lib/hijack/instrument.js"],"sourcesContent":["import { wrapWebApp } from './wrap_webapp.js';\nimport { wrapFastRender } from './fast_render.js';\nimport { wrapFs } from './fs.js';\nimport { wrapPicker } from './picker.js';\nimport { wrapRouters } from './wrap_routers.js';\nimport { wrapFibers } from './async.js';\nimport { wrapSubscription } from './wrap_subscription';\nimport { wrapServer } from './wrap_server';\nimport { wrapSession } from './wrap_session';\nimport {\n  wrapForCountingObservers,\n  wrapMultiplexer,\n  wrapOplogObserveDriver,\n  wrapPollingObserveDriver\n} from './wrap_observers';\nimport { wrapStringifyDDP } from './wrap_ddp_stringify';\nimport { setLabels } from './set_labels';\nimport { hijackDBOps } from './db';\n\nlet instrumented = false;\nKadira._startInstrumenting = function (callback) {\n  if (instrumented) {\n    callback();\n    return;\n  }\n\n  instrumented = true;\n  wrapFibers();\n  wrapStringifyDDP();\n  wrapWebApp();\n  wrapFastRender();\n  wrapPicker();\n  wrapFs();\n  wrapRouters();\n\n  MeteorX.onReady(function () {\n    // instrumenting session\n    wrapServer(MeteorX.Server.prototype);\n    wrapSession(MeteorX.Session.prototype);\n    wrapSubscription(MeteorX.Subscription.prototype);\n\n    if (MeteorX.MongoOplogDriver) {\n      wrapOplogObserveDriver(MeteorX.MongoOplogDriver.prototype);\n    }\n\n    if (MeteorX.MongoPollingDriver) {\n      wrapPollingObserveDriver(MeteorX.MongoPollingDriver.prototype);\n    }\n\n    if (MeteorX.Multiplexer) {\n      wrapMultiplexer(MeteorX.Multiplexer.prototype);\n    }\n\n    wrapForCountingObservers();\n    hijackDBOps();\n\n    setLabels();\n    callback();\n  });\n};\n"],"mappings":"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"},"sourceType":"module","externalDependencies":{},"hash":"7e7796f2ad0a26dc606ec1781fb004fb71f68815"}
